# CoreSight-Docs

CoreSight docs for decoder design and test.

## Observations

Currently, the most detailed L2 testcase input ( L2_ControlCore_in-4 ) is dumped by CoreSight-Decoder/L1_led_dump from a running linux. Unexpectedly, after several fixed steps to enable the coresight components in linux:

```
$ cd /sys/bus/coresight/devices
$ echo 1 > tpiu0/enable_sink
$ echo 1 > etm0/enable_source
```

 the output generated by the coresight remains stable, which benifits a lot to the test work: 



| 序号 | 报文类型 | 用例输入 | 含义 |
| :-: | :-----: | :----: | :--: |
| 1 | A-Sync       | 8022 0022 0022 0022 0022 0022 0022 0022 0022 0022 0022 0022 | N/A |
| 2 | Trace Info   | 0022 0122 0122 | N/A |
| 3 | Long Address | 0022 0022 0022 0022 0022 0022 0022 0022 9D22 | 64 ISO L, Address: 0x0 |
| 4 | Trace On     | 0422 | N/A |
| 5 | Address with Context | 3122 FF22 FF22 8022 0022 1022 AB22 7F22 7122 8522 | 64 ISO L, Address: 0xFFFF800010ABFFC4, Context info byte, EL=1, SF=64, NS=1, V=0, C=0 |
| 6 | Atom F3      | FC22 | NEE |
| 7 | Long Address | FF22 FF22 8022 0022 1022 AD22 1E22 7A22 9D22 | 64 ISO L, Address: 0xFFFF800010AD3DE8 |
| 8 | Atom F4 | DE22 | ENEN |
| 9 | Atom F3 | FD22 | ENE |
| 10 | Atom F3 | FF22 | EEE |
| 11 | Address | 1022 E722 7022 7222 9A22 | 32 ISO L, Address: 0xFFFF800010E7E1C8 |
| 12 | Atom F4 | DC22 | EEEN |
| 13 | Atom F3 | FA22 | NEN |
| 14 | Atom F3 | F822 | NNN |
| 12 | Atom F3 | FB22 | EEN |
| 13 | Atom F3 | FC22 | NNE |
| 14 | Short Address | 9522 | ISO S, Address: N/A |

Four CPU-associated ETM ids are also probed by L1_led_dump:

| ETM | ID |
| :-: | :-: |
| ETM0 | 0x10 |
| ETM1 | 0x12 |
| ETM2 | 0x14 |
| ETM3 | 0x16 |
